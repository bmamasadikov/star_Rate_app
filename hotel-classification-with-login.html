<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Classification System | O'zbekiston</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root{--gold-50:#FFFDF5;--gold-100:#FEF9E7;--gold-400:#F5D06B;--gold-500:#D4A84B;--gold-600:#B8922F;--gold-700:#8A6D1F;--navy-50:#F0F4F8;--navy-100:#D9E2EC;--navy-300:#9FB3C8;--navy-500:#627D98;--navy-600:#486581;--navy-800:#243B53;--navy-900:#102A43;--cream:#FDFBF7;--border:#E8E4DE;--success:#10B981;--danger:#EF4444;--text-muted:#7A7A7A;--shadow-md:0 4px 6px -1px rgba(0,0,0,0.07);--shadow-lg:0 10px 15px -3px rgba(0,0,0,0.08);--shadow-xl:0 20px 25px -5px rgba(0,0,0,0.1)}
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:'DM Sans',sans-serif;background:var(--cream);min-height:100vh;line-height:1.5}
        
        /* LOGIN PAGE */
        .login-page{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--navy-900) 0%,var(--navy-800) 50%,var(--navy-900) 100%);padding:1rem}
        .login-container{background:white;border-radius:20px;box-shadow:var(--shadow-xl);width:100%;max-width:420px;overflow:hidden}
        .login-header{background:linear-gradient(135deg,var(--gold-400),var(--gold-600));padding:2rem;text-align:center}
        .login-logo{width:70px;height:70px;background:white;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:2rem;margin:0 auto 1rem;box-shadow:var(--shadow-md)}
        .login-header h1{font-family:'Cormorant Garamond',serif;font-size:1.6rem;color:var(--navy-900);margin-bottom:0.25rem}
        .login-header p{font-size:0.8rem;color:var(--navy-800);opacity:0.8}
        .login-form{padding:2rem}
        .form-group{margin-bottom:1.25rem}
        .form-label{display:block;font-size:0.8rem;font-weight:600;color:var(--navy-700);margin-bottom:0.4rem}
        .form-input{width:100%;padding:0.75rem 1rem;border:2px solid var(--border);border-radius:10px;font-size:0.9rem;transition:0.2s}
        .form-input:focus{outline:none;border-color:var(--gold-500);box-shadow:0 0 0 3px var(--gold-100)}
        .form-input.error{border-color:var(--danger)}
        .error-msg{color:var(--danger);font-size:0.75rem;margin-top:0.3rem;display:none}
        .error-msg.show{display:block}
        .btn-login{width:100%;padding:0.9rem;background:linear-gradient(135deg,var(--navy-800),var(--navy-900));color:white;border:none;border-radius:10px;font-size:0.95rem;font-weight:600;cursor:pointer;transition:0.2s;margin-top:0.5rem}
        .btn-login:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}
        .login-footer{text-align:center;padding:0 2rem 2rem;font-size:0.8rem;color:var(--text-muted)}
        
        /* HOTEL PROFILE PAGE */
        .profile-page{min-height:100vh;display:none;background:linear-gradient(135deg,var(--navy-900) 0%,var(--navy-800) 100%);padding:2rem}
        .profile-container{max-width:600px;margin:0 auto}
        .profile-header{text-align:center;margin-bottom:2rem}
        .profile-header h1{font-family:'Cormorant Garamond',serif;font-size:2rem;color:white;margin-bottom:0.5rem}
        .profile-header p{color:var(--gold-400);font-size:0.9rem}
        .profile-card{background:white;border-radius:16px;padding:2rem;box-shadow:var(--shadow-xl)}
        .profile-card h2{font-family:'Cormorant Garamond',serif;font-size:1.4rem;color:var(--navy-800);margin-bottom:1.5rem;padding-bottom:0.75rem;border-bottom:2px solid var(--gold-100)}
        .star-selector{display:flex;gap:0.5rem;flex-wrap:wrap;margin-bottom:1.5rem}
        .star-option{flex:1;min-width:80px;padding:1rem 0.5rem;border:2px solid var(--border);border-radius:10px;text-align:center;cursor:pointer;transition:0.2s;background:white}
        .star-option:hover{border-color:var(--gold-400);background:var(--gold-50)}
        .star-option.selected{border-color:var(--gold-500);background:var(--gold-100)}
        .star-option .stars{font-size:1.1rem;margin-bottom:0.2rem}
        .star-option .label{font-size:0.7rem;color:var(--text-muted);font-weight:500}
        .email-section{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--border)}
        .email-section h3{font-size:0.95rem;color:var(--navy-700);margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem}
        .email-list{display:flex;flex-direction:column;gap:0.75rem}
        .email-row{display:flex;gap:0.5rem;align-items:center}
        .email-row input{flex:1}
        .btn-add-email{padding:0.5rem 1rem;background:var(--navy-100);color:var(--navy-700);border:none;border-radius:6px;font-size:0.8rem;cursor:pointer;display:flex;align-items:center;gap:0.3rem;margin-top:0.5rem}
        .btn-add-email:hover{background:var(--navy-200)}
        .btn-remove{width:36px;height:36px;border:none;background:var(--danger);color:white;border-radius:6px;cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center}
        .btn-remove:hover{opacity:0.9}
        .report-options{margin-top:1rem}
        .report-option{display:flex;align-items:center;gap:0.5rem;padding:0.5rem 0;font-size:0.85rem}
        .report-option input[type="checkbox"]{width:18px;height:18px;accent-color:var(--gold-500)}
        .btn-continue{width:100%;padding:1rem;background:linear-gradient(135deg,var(--gold-500),var(--gold-600));color:var(--navy-900);border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;margin-top:1.5rem;transition:0.2s}
        .btn-continue:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}
        .btn-continue:disabled{opacity:0.5;cursor:not-allowed;transform:none}
        
        /* MAIN APP */
        .app-page{display:none}
        .app-page.active{display:block}
        .header{background:linear-gradient(135deg,var(--navy-900),var(--navy-800));padding:1rem 2rem;position:sticky;top:0;z-index:100;box-shadow:var(--shadow-lg)}
        .header-inner{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}
        .logo{display:flex;align-items:center;gap:0.75rem}.logo-icon{width:42px;height:42px;background:linear-gradient(135deg,var(--gold-400),var(--gold-600));border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.3rem}
        .logo h1{font-family:'Cormorant Garamond',serif;font-size:1.3rem;color:white}.logo span{font-size:0.65rem;color:var(--gold-400);text-transform:uppercase;letter-spacing:1.5px;display:block}
        .hotel-badge{background:var(--gold-500);color:var(--navy-900);padding:0.4rem 1rem;border-radius:20px;font-size:0.8rem;font-weight:600;display:flex;align-items:center;gap:0.5rem}
        .header-right{display:flex;align-items:center;gap:1rem}
        .lang-switch{display:flex;background:rgba(255,255,255,0.1);border-radius:6px;overflow:hidden}.lang-btn{padding:0.4rem 0.8rem;background:transparent;border:none;color:var(--navy-300);cursor:pointer;font-size:0.8rem;font-weight:500;transition:0.2s}.lang-btn.active{background:var(--gold-500);color:var(--navy-900)}.lang-btn:hover:not(.active){background:rgba(255,255,255,0.15);color:white}
        .btn-logout{padding:0.4rem 0.8rem;background:rgba(255,255,255,0.1);border:none;color:white;border-radius:6px;font-size:0.8rem;cursor:pointer}
        .btn-logout:hover{background:rgba(255,255,255,0.2)}
        
        .nav{background:white;border-bottom:1px solid var(--border);position:sticky;top:66px;z-index:90}.nav-inner{max-width:1400px;margin:0 auto;display:flex;overflow-x:auto;padding:0 2rem}
        .nav-tab{padding:0.9rem 1.2rem;background:none;border:none;color:var(--text-muted);cursor:pointer;font-size:0.85rem;font-weight:500;white-space:nowrap;position:relative;transition:0.2s}.nav-tab:hover{color:#1a1a1a}.nav-tab.active{color:var(--gold-600)}.nav-tab.active::after{content:'';position:absolute;bottom:0;left:0;right:0;height:3px;background:var(--gold-500);border-radius:3px 3px 0 0}
        
        .main{max-width:1400px;margin:0 auto;padding:1.5rem 2rem}.tab-content{display:none;animation:fadeIn 0.3s}.tab-content.active{display:block}@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
        
        .stats-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:1rem;margin-bottom:1.5rem}.stat-card{background:white;border-radius:12px;padding:1.2rem;box-shadow:var(--shadow-md);border:1px solid var(--border)}
        .stat-card .icon{width:38px;height:38px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;margin-bottom:0.6rem}.stat-card.gold .icon{background:var(--gold-100)}.stat-card.blue .icon{background:var(--navy-100)}.stat-card.green .icon{background:#D1FAE5}.stat-card.orange .icon{background:#FEF3C7}
        .stat-card .value{font-family:'Cormorant Garamond',serif;font-size:2rem;font-weight:700;color:var(--navy-900)}.stat-card .label{font-size:0.75rem;color:var(--text-muted)}
        
        .star-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:0.8rem;margin-bottom:1.5rem}@media(max-width:900px){.star-grid{grid-template-columns:repeat(3,1fr)}}@media(max-width:500px){.star-grid{grid-template-columns:repeat(2,1fr)}}
        .star-card{background:white;border-radius:10px;padding:1rem;text-align:center;box-shadow:var(--shadow-md);border:2px solid transparent;cursor:pointer;transition:0.2s}.star-card:hover{border-color:var(--gold-400);transform:translateY(-2px)}.star-card.selected{border-color:var(--gold-500);background:var(--gold-50)}
        .star-card .stars{font-size:1.3rem;margin-bottom:0.3rem}.star-card h3{font-size:0.95rem;color:var(--navy-800);margin-bottom:0.2rem}.star-card small{font-size:0.7rem;color:var(--text-muted)}
        
        .section{background:white;border-radius:10px;box-shadow:var(--shadow-md);border:1px solid var(--border);overflow:hidden;margin-bottom:1rem}
        .section-head{padding:1rem;background:linear-gradient(135deg,var(--navy-800),var(--navy-900));color:white;display:flex;justify-content:space-between;align-items:center;cursor:pointer}
        .section-head h3{font-family:'Cormorant Garamond',serif;font-size:1.05rem;display:flex;align-items:center;gap:0.5rem}.section-badge{background:var(--gold-500);color:var(--navy-900);padding:0.15rem 0.5rem;border-radius:10px;font-size:0.65rem;font-weight:600}
        .section-toggle{font-size:1.2rem;transition:transform 0.3s}.section.collapsed .section-toggle{transform:rotate(-90deg)}.section-body{max-height:3000px;overflow:hidden;transition:max-height 0.3s}.section.collapsed .section-body{max-height:0}
        
        table{width:100%;border-collapse:collapse}th{background:var(--navy-50);padding:0.7rem 0.8rem;text-align:left;font-size:0.68rem;font-weight:600;color:var(--navy-600);text-transform:uppercase;letter-spacing:0.5px;border-bottom:1px solid var(--border)}
        td{padding:0.7rem 0.8rem;border-bottom:1px solid var(--border);font-size:0.82rem}tr:last-child td{border-bottom:none}tr:hover{background:var(--gold-50)}
        .cid{font-weight:600;color:var(--navy-600);font-size:0.8rem}.pts{display:inline-flex;align-items:center;justify-content:center;min-width:28px;height:22px;background:var(--gold-100);color:var(--gold-700);border-radius:4px;font-weight:600;font-size:0.75rem}
        .stars-row{display:flex;gap:2px}.star-dot{width:18px;height:18px;border-radius:3px;display:flex;align-items:center;justify-content:center;font-size:0.6rem;font-weight:600}.star-dot.m{background:var(--gold-500);color:white}.star-dot.o{background:var(--navy-100);color:var(--navy-500)}
        
        .chk{width:20px;height:20px;border:2px solid var(--border);border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;background:white;transition:0.2s}.chk:hover{border-color:var(--gold-400)}.chk.on{background:var(--success);border-color:var(--success);color:white}.chk.on::after{content:'‚úì';font-size:0.75rem;font-weight:bold}
        
        .filters{background:white;border-radius:8px;padding:1rem;margin-bottom:1rem;box-shadow:var(--shadow-md);display:flex;gap:0.8rem;flex-wrap:wrap;align-items:center}
        .search{flex:1;min-width:180px;position:relative}.search input{width:100%;padding:0.55rem 0.8rem 0.55rem 2.2rem;border:1px solid var(--border);border-radius:5px;font-size:0.82rem}.search input:focus{outline:none;border-color:var(--gold-400)}.search::before{content:'üîç';position:absolute;left:0.7rem;top:50%;transform:translateY(-50%);font-size:0.8rem}
        select{padding:0.55rem 1.8rem 0.55rem 0.7rem;border:1px solid var(--border);border-radius:5px;font-size:0.82rem;background:white url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10'%3E%3Cpath fill='%23666' d='M5 7L0 2h10z'/%3E%3C/svg%3E") no-repeat right 0.7rem center;appearance:none;cursor:pointer}
        
        .assess-panel{background:linear-gradient(135deg,var(--navy-800),var(--navy-900));border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;color:white}
        .assess-head{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:1rem;margin-bottom:1rem}.assess-title{font-family:'Cormorant Garamond',serif;font-size:1.4rem}.assess-sub{color:var(--navy-300);font-size:0.8rem;margin-top:0.2rem}
        .btn{padding:0.55rem 1rem;border-radius:5px;font-size:0.8rem;font-weight:600;cursor:pointer;border:none;display:inline-flex;align-items:center;gap:0.3rem;transition:0.2s}.btn-gold{background:var(--gold-500);color:var(--navy-900)}.btn-gold:hover{background:var(--gold-400)}.btn-ghost{background:rgba(255,255,255,0.15);color:white}.btn-ghost:hover{background:rgba(255,255,255,0.25)}
        .assess-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:1rem}.a-stat{text-align:center;padding:0.7rem;background:rgba(255,255,255,0.1);border-radius:8px}.a-stat .val{font-family:'Cormorant Garamond',serif;font-size:1.8rem;font-weight:700;color:var(--gold-400)}.a-stat .lbl{font-size:0.65rem;color:var(--navy-300);text-transform:uppercase;letter-spacing:0.5px}
        .result-box{background:linear-gradient(135deg,var(--gold-400),var(--gold-600));color:var(--navy-900);padding:0.8rem 1.5rem;border-radius:10px;text-align:center}.result-box .stars{font-size:1.6rem;letter-spacing:3px}.result-box .lbl{font-size:0.75rem;font-weight:600}
        
        .compare-grid{display:grid;grid-template-columns:minmax(200px,2fr) repeat(5,1fr);gap:1px;background:var(--border);border-radius:10px;overflow:hidden}.c-cell{background:white;padding:0.6rem 0.8rem;font-size:0.8rem}.c-head{background:var(--navy-800);color:white;font-weight:600;text-align:center;padding:0.8rem}.c-head.star{background:linear-gradient(135deg,var(--gold-500),var(--gold-600));color:var(--navy-900)}.c-cat{background:var(--navy-50);font-weight:600;color:var(--navy-600);grid-column:span 6}.c-cell.center{text-align:center}.check-i{color:var(--success);font-weight:bold}.dash-i{color:var(--text-muted)}
        
        .report-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-top:1rem}.report-card{background:white;border-radius:10px;padding:1.2rem;border:1px solid var(--border);cursor:pointer;transition:0.2s}.report-card:hover{border-color:var(--gold-400);box-shadow:var(--shadow-lg);transform:translateY(-2px)}.report-card .icon{width:48px;height:48px;background:var(--gold-100);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;margin-bottom:0.8rem}.report-card h4{font-family:'Cormorant Garamond',serif;font-size:1.1rem;margin-bottom:0.3rem;color:var(--navy-800)}.report-card p{font-size:0.78rem;color:var(--text-muted)}
        
        .modal-bg{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:1000;padding:1rem}.modal-bg.active{display:flex}.modal{background:white;border-radius:12px;max-width:550px;width:100%;max-height:85vh;overflow-y:auto}.modal-head{padding:1.2rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}.modal-head h3{font-family:'Cormorant Garamond',serif;font-size:1.3rem}.modal-close{background:none;border:none;font-size:1.4rem;cursor:pointer;color:var(--text-muted)}.modal-body{padding:1.2rem}.modal-foot{padding:0.8rem 1.2rem;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:0.6rem}
        
        h2.sec-title{font-family:'Cormorant Garamond',serif;font-size:1.4rem;margin-bottom:1rem;color:var(--navy-800)}
        @media(max-width:768px){.header-inner{flex-direction:column;text-align:center}.main{padding:1rem}.compare-grid{display:block}.c-cell{display:flex;justify-content:space-between;padding:0.5rem 0.8rem}.profile-page{padding:1rem}}
    </style>
</head>
<body>
    <!-- LOGIN PAGE -->
    <div class="login-page" id="loginPage">
        <div class="login-container">
            <div class="login-header">
                <div class="login-logo">üè®</div>
                <h1>Hotel Classification</h1>
                <p>O'zbekiston Mehmonxona Standarti</p>
            </div>
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label class="form-label">Login / Username</label>
                    <input type="text" class="form-input" id="loginUsername" placeholder="Enter your login" required>
                    <div class="error-msg" id="usernameError">Please enter your username</div>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" required>
                    <div class="error-msg" id="passwordError">Please enter your password</div>
                </div>
                <button type="submit" class="btn-login">Submit ‚Üí</button>
            </form>
            <div class="login-footer">
                Hotel Classification System v1.0<br>
                <small>Demo: any login/password works</small>
            </div>
        </div>
    </div>

    <!-- HOTEL PROFILE PAGE -->
    <div class="profile-page" id="profilePage">
        <div class="profile-container">
            <div class="profile-header">
                <h1>üè® Hotel Profile Setup</h1>
                <p>Enter your hotel information to begin assessment</p>
            </div>
            <div class="profile-card">
                <h2>Hotel Information</h2>
                <div class="form-group">
                    <label class="form-label">Hotel Name *</label>
                    <input type="text" class="form-input" id="hotelName" placeholder="Enter hotel name" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Stars Applying For *</label>
                    <div class="star-selector" id="starSelector">
                        <div class="star-option" data-star="1"><div class="stars">‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ</div><div class="label">1 Star</div></div>
                        <div class="star-option" data-star="2"><div class="stars">‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ</div><div class="label">2 Stars</div></div>
                        <div class="star-option" data-star="3"><div class="stars">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</div><div class="label">3 Stars</div></div>
                        <div class="star-option" data-star="4"><div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div><div class="label">4 Stars</div></div>
                        <div class="star-option" data-star="5"><div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div><div class="label">5 Stars</div></div>
                    </div>
                </div>

                <div class="email-section">
                    <h3>üìß Email Addresses for Reports</h3>
                    <div class="email-list" id="emailList">
                        <div class="email-row">
                            <input type="email" class="form-input" placeholder="Primary email address" id="primaryEmail">
                        </div>
                    </div>
                    <button type="button" class="btn-add-email" onclick="addEmailField()">+ Add Another Email</button>
                    
                    <div class="report-options">
                        <label class="report-option">
                            <input type="checkbox" id="optFullReport" checked>
                            Send Full Assessment Report
                        </label>
                        <label class="report-option">
                            <input type="checkbox" id="optGapAnalysis" checked>
                            Send Gap Analysis Report
                        </label>
                        <label class="report-option">
                            <input type="checkbox" id="optMandatoryList">
                            Send Mandatory Requirements Checklist
                        </label>
                        <label class="report-option">
                            <input type="checkbox" id="optWeeklyProgress">
                            Send Weekly Progress Updates
                        </label>
                    </div>
                </div>

                <button class="btn-continue" id="btnContinue" onclick="goToApp()">Continue to Assessment ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- MAIN APP PAGE -->
    <div class="app-page" id="appPage">
        <header class="header">
            <div class="header-inner">
                <div class="logo">
                    <div class="logo-icon">üè®</div>
                    <div><h1>Hotel Classification</h1><span>O'zbekiston Standarti</span></div>
                </div>
                <div class="header-right">
                    <div class="hotel-badge" id="hotelBadge">
                        <span id="displayHotelName">Hotel Name</span>
                        <span id="displayStars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                    </div>
                    <div class="lang-switch">
                        <button class="lang-btn active" data-lang="en">EN</button>
                        <button class="lang-btn" data-lang="uz">UZ</button>
                        <button class="lang-btn" data-lang="ru">RU</button>
                    </div>
                    <button class="btn-logout" onclick="logout()">Logout</button>
                </div>
            </div>
        </header>

        <nav class="nav"><div class="nav-inner">
            <button class="nav-tab active" data-tab="dashboard">üìä Dashboard</button>
            <button class="nav-tab" data-tab="browse">üìã Browse</button>
            <button class="nav-tab" data-tab="assess">‚úÖ Assessment</button>
            <button class="nav-tab" data-tab="compare">‚öñÔ∏è Compare</button>
            <button class="nav-tab" data-tab="reports">üìÑ Reports</button>
        </div></nav>

        <main class="main">
            <div id="dashboard" class="tab-content active">
                <div class="stats-row">
                    <div class="stat-card gold"><div class="icon">üìã</div><div class="value" id="stat-total">0</div><div class="label">Total Criteria</div></div>
                    <div class="stat-card blue"><div class="icon">üìÅ</div><div class="value">17</div><div class="label">Categories</div></div>
                    <div class="stat-card green"><div class="icon">‚≠ê</div><div class="value" id="stat-points">0</div><div class="label">Max Points</div></div>
                    <div class="stat-card orange"><div class="icon">‚ö†Ô∏è</div><div class="value" id="stat-mandatory">0</div><div class="label">Mandatory for Target</div></div>
                </div>
                <h2 class="sec-title">Star Levels Overview</h2>
                <div class="star-grid" id="star-grid"></div>
                <h2 class="sec-title">Categories</h2>
                <div id="cat-overview"></div>
            </div>

            <div id="browse" class="tab-content">
                <div class="filters">
                    <div class="search"><input type="text" id="search-browse" placeholder="Search criteria..."></div>
                    <select id="filter-cat"><option value="">All Categories</option></select>
                    <select id="filter-star"><option value="">All Stars</option><option value="1">1‚òÖ</option><option value="2">2‚òÖ</option><option value="3">3‚òÖ</option><option value="4">4‚òÖ</option><option value="5">5‚òÖ</option></select>
                    <select id="filter-req"><option value="">All</option><option value="m">Mandatory</option><option value="o">Optional</option></select>
                </div>
                <div id="browse-results"></div>
            </div>

            <div id="assess" class="tab-content">
                <div class="assess-panel">
                    <div class="assess-head">
                        <div>
                            <div class="assess-title" id="assessTitle">Hotel Assessment</div>
                            <div class="assess-sub">Check criteria your hotel meets</div>
                        </div>
                        <div style="display:flex;gap:0.5rem">
                            <button class="btn btn-ghost" onclick="resetAssess()">üîÑ Reset</button>
                            <button class="btn btn-gold" onclick="emailReport()">üìß Email Report</button>
                        </div>
                    </div>
                    <div class="assess-stats">
                        <div class="a-stat"><div class="val" id="a-points">0</div><div class="lbl">Points</div></div>
                        <div class="a-stat"><div class="val" id="a-count">0</div><div class="lbl">Criteria</div></div>
                        <div class="a-stat"><div class="val" id="a-mand">0%</div><div class="lbl">Target Mandatory</div></div>
                        <div class="result-box"><div class="stars" id="a-result">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div><div class="lbl">Eligible Rating</div></div>
                    </div>
                </div>
                <div class="filters">
                    <div class="search"><input type="text" id="search-assess" placeholder="Search..."></div>
                    <select id="filter-cat-assess"><option value="">All Categories</option></select>
                    <label style="display:flex;align-items:center;gap:0.4rem;cursor:pointer;font-size:0.82rem"><input type="checkbox" id="hide-checked"> Unchecked only</label>
                </div>
                <div id="assess-list"></div>
            </div>

            <div id="compare" class="tab-content">
                <h2 class="sec-title">Star Level Comparison</h2>
                <p style="color:var(--text-muted);margin-bottom:1rem;font-size:0.85rem">Compare mandatory requirements across star levels</p>
                <select id="filter-cat-compare" style="margin-bottom:1rem"><option value="">All Categories</option></select>
                <div id="compare-table"></div>
            </div>

            <div id="reports" class="tab-content">
                <h2 class="sec-title">Report Generation</h2>
                <p style="color:var(--text-muted);margin-bottom:1rem;font-size:0.85rem">Generate and email detailed classification reports</p>
                <div class="report-grid">
                    <div class="report-card" onclick="showReport('full')"><div class="icon">üìä</div><h4>Full Assessment</h4><p>Complete report with points breakdown</p></div>
                    <div class="report-card" onclick="showReport('gap')"><div class="icon">üéØ</div><h4>Gap Analysis</h4><p>Missing criteria for target star level</p></div>
                    <div class="report-card" onclick="showReport('mandatory')"><div class="icon">‚ö†Ô∏è</div><h4>Mandatory Checklist</h4><p>Required criteria for target star</p></div>
                    <div class="report-card" onclick="emailReport()"><div class="icon">üìß</div><h4>Email Reports</h4><p>Send reports to registered emails</p></div>
                    <div class="report-card" onclick="exportData()"><div class="icon">üíæ</div><h4>Export Data</h4><p>Download assessment as JSON</p></div>
                </div>
            </div>
        </main>
    </div>

    <!-- MODAL -->
    <div class="modal-bg" id="modal">
        <div class="modal">
            <div class="modal-head"><h3 id="modal-title">Report</h3><button class="modal-close" onclick="closeModal()">√ó</button></div>
            <div class="modal-body" id="modal-body"></div>
            <div class="modal-foot"><button class="btn btn-ghost" onclick="closeModal()">Close</button><button class="btn btn-gold" onclick="window.print()">üñ®Ô∏è Print</button></div>
        </div>
    </div>

<script>
// DATA
const DATA=[{"id":1,"name_uz":"Umumiy talablar","name_en":"General Requirements","name_ru":"–û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è","items":[{"id":"1","criterion_uz":"Tozalik va gigiena.","criterion_en":"Cleanliness and hygiene.","criterion_ru":"–ß–∏—Å—Ç–æ—Ç–∞ –∏ –≥–∏–≥–∏–µ–Ω–∞.","points":0,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"2","criterion_uz":"Tashqi ko'rinish.","criterion_en":"Exterior appearance.","criterion_ru":"–í–Ω–µ—à–Ω–∏–π –≤–∏–¥.","points":0,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"3","criterion_uz":"Jihozlar holati.","criterion_en":"Equipment condition.","criterion_ru":"–°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.","points":0,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"4","criterion_uz":"Ko'chmas generator.","criterion_en":"Stationary generator.","criterion_ru":"–°—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä.","points":4,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"9.1","criterion_uz":"Lift (3+ qavat).","criterion_en":"Elevator (3+ floors).","criterion_ru":"–õ–∏—Ñ—Ç (3+ —ç—Ç–∞–∂–∞).","points":2,"mandatory":{"1_star":true,"2_star":true,"3_star":false,"4_star":false,"5_star":false}},{"id":"9.2","criterion_uz":"Lift (2+ qavat).","criterion_en":"Elevator (2+ floors).","criterion_ru":"–õ–∏—Ñ—Ç (2+ —ç—Ç–∞–∂–∞).","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"9.3","criterion_uz":"Xizmat lifti.","criterion_en":"Service lift.","criterion_ru":"–ì—Ä—É–∑–æ–≤–æ–π –ª–∏—Ñ—Ç.","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"10.2","criterion_uz":"Soyabonli kirish.","criterion_en":"Covered entrance.","criterion_ru":"–ö—Ä—ã—Ç—ã–π –≤—Ö–æ–¥.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":false}},{"id":"10.3","criterion_uz":"Suv filtratsiyasi.","criterion_en":"Water filtration.","criterion_ru":"–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–æ–¥—ã.","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":false}},{"id":"11.5","criterion_uz":"Maxsus sanuzel.","criterion_en":"Accessible restroom.","criterion_ru":"–°–∞–Ω—É–∑–µ–ª –¥–ª—è –∏–Ω–≤–∞–ª–∏–¥–æ–≤.","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":false}}]},{"id":2,"name_uz":"Qabul qilish","name_en":"Reception & Services","name_ru":"–ü—Ä–∏—ë–º –∏ —É—Å–ª—É–≥–∏","items":[{"id":"12.1","criterion_uz":"Milliy hunarmandchilik.","criterion_en":"National handicraft area.","criterion_ru":"–ó–æ–Ω–∞ —Ä–µ–º—ë—Å–µ–ª.","points":2,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"12.2","criterion_uz":"San'at kompozitsiyalari.","criterion_en":"Art compositions.","criterion_ru":"–ê—Ä—Ç-–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏.","points":2,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"12.3","criterion_uz":"Lobbida o'tirish.","criterion_en":"Lobby seating.","criterion_ru":"–õ–æ–±–±–∏ —Å –º–µ—Å—Ç–∞–º–∏.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"12.5","criterion_uz":"Valet parking.","criterion_en":"Valet parking.","criterion_ru":"Valet –ø–∞—Ä–∫–æ–≤–∫–∞.","points":10,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":false}},{"id":"12.6","criterion_uz":"24 soat bagaj.","criterion_en":"24h luggage.","criterion_ru":"24—á –±–∞–≥–∞–∂.","points":5,"mandatory":{"1_star":false,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"12.8","criterion_uz":"Poyabzal tozalash.","criterion_en":"Shoe polish.","criterion_ru":"–ß–∏—Å—Ç–∫–∞ –æ–±—É–≤–∏.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"12.9","criterion_uz":"Issiqlik pardasi.","criterion_en":"Air curtain.","criterion_ru":"–¢–µ–ø–ª–æ–≤–∞—è –∑–∞–≤–µ—Å–∞.","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"12.10","criterion_uz":"Ventilyatsiya.","criterion_en":"Ventilation.","criterion_ru":"–í–µ–Ω—Ç–∏–ª—è—Ü–∏—è.","points":7,"mandatory":{"1_star":false,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"13.1","criterion_uz":"Dahliz ‚â•9m¬≤.","criterion_en":"Hall ‚â•9m¬≤.","criterion_ru":"–•–æ–ª–ª ‚â•9–º¬≤.","points":2,"mandatory":{"1_star":true,"2_star":false,"3_star":false,"4_star":false,"5_star":false}},{"id":"13.2","criterion_uz":"Dahliz ‚â•20m¬≤.","criterion_en":"Hall ‚â•20m¬≤.","criterion_ru":"–•–æ–ª–ª ‚â•20–º¬≤.","points":2,"mandatory":{"1_star":false,"2_star":true,"3_star":false,"4_star":false,"5_star":false}},{"id":"13.3","criterion_uz":"Dahliz ‚â•30m¬≤.","criterion_en":"Hall ‚â•30m¬≤.","criterion_ru":"–•–æ–ª–ª ‚â•30–º¬≤.","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":false,"5_star":false}},{"id":"13.4","criterion_uz":"Dahliz (max 120).","criterion_en":"Hall (max 120).","criterion_ru":"–•–æ–ª–ª (–º–∞–∫—Å 120).","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":false}},{"id":"13.5","criterion_uz":"Dahliz (max 160).","criterion_en":"Hall (max 160).","criterion_ru":"–•–æ–ª–ª (–º–∞–∫—Å 160).","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":false,"5_star":true}},{"id":"15.1","criterion_uz":"Kunlik sochiq.","criterion_en":"Daily towel.","criterion_ru":"–ï–∂–µ–¥–Ω. –ø–æ–ª–æ—Ç–µ–Ω—Ü–∞.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"15.2","criterion_uz":"Haftada 2x choyshab.","criterion_en":"Linen 2x/week.","criterion_ru":"–ë–µ–ª—å—ë 2 —Ä–∞–∑–∞/–Ω–µ–¥.","points":3,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":false,"5_star":false}},{"id":"16.1","criterion_uz":"1 soat dazmol.","criterion_en":"Ironing 1h.","criterion_ru":"–ì–ª–∞–∂–∫–∞ –∑–∞ 1 —á–∞—Å.","points":3,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"16.2","criterion_uz":"Kir yuvish.","criterion_en":"Laundry.","criterion_ru":"–°—Ç–∏—Ä–∫–∞.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"16.3","criterion_uz":"24s kimyoviy.","criterion_en":"Dry clean 24h.","criterion_ru":"–•–∏–º—á–∏—Å—Ç–∫–∞ 24—á.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"17","criterion_uz":"Naqd pulsiz.","criterion_en":"Cashless.","criterion_ru":"–ë–µ–∑–Ω–∞–ª.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}}]},{"id":3,"name_uz":"Boshqa xizmatlar","name_en":"Other Services","name_ru":"–ü—Ä–æ—á–∏–µ —É—Å–ª—É–≥–∏","items":[{"id":"18","criterion_uz":"Matbuot.","criterion_en":"Press materials.","criterion_ru":"–ü–µ—á–∞—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.","points":3,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"20","criterion_uz":"Chop etish.","criterion_en":"Printing.","criterion_ru":"–ü–µ—á–∞—Ç—å.","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":false}},{"id":"23","criterion_uz":"Transfer.","criterion_en":"Transfer.","criterion_ru":"–¢—Ä–∞–Ω—Å—Ñ–µ—Ä.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"24","criterion_uz":"Xonaga kuzatish.","criterion_en":"Room escort.","criterion_ru":"–°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"25","criterion_uz":"Kechki tayyorlash.","criterion_en":"Turndown.","criterion_ru":"–í–µ—á. –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞.","points":7,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":false,"5_star":true}},{"id":"27","criterion_uz":"Yostiq tozalash.","criterion_en":"Pillow clean.","criterion_ru":"–ß–∏—Å—Ç–∫–∞ –ø–æ–¥—É—à–µ–∫.","points":1,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}}]},{"id":4,"name_uz":"Nomerlar","name_en":"Rooms","name_ru":"–ù–æ–º–µ—Ä–∞","items":[{"id":"28","criterion_uz":"1-2 kishilik.","criterion_en":"Single/double.","criterion_ru":"1-2 –º–µ—Å—Ç–Ω—ã–µ.","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"29.1","criterion_uz":"Xona ‚â•12m¬≤.","criterion_en":"Room ‚â•12m¬≤.","criterion_ru":"–ù–æ–º–µ—Ä ‚â•12–º¬≤.","points":10,"mandatory":{"1_star":true,"2_star":false,"3_star":false,"4_star":false,"5_star":false}},{"id":"29.2","criterion_uz":"Xona ‚â•18m¬≤.","criterion_en":"Room ‚â•18m¬≤.","criterion_ru":"–ù–æ–º–µ—Ä ‚â•18–º¬≤.","points":15,"mandatory":{"1_star":false,"2_star":true,"3_star":false,"4_star":false,"5_star":false}},{"id":"29.3","criterion_uz":"Xona ‚â•22m¬≤.","criterion_en":"Room ‚â•22m¬≤.","criterion_ru":"–ù–æ–º–µ—Ä ‚â•22–º¬≤.","points":20,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":false,"5_star":false}},{"id":"29.4","criterion_uz":"Xona ‚â•30m¬≤.","criterion_en":"Room ‚â•30m¬≤.","criterion_ru":"–ù–æ–º–µ—Ä ‚â•30–º¬≤.","points":25,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":false}},{"id":"30","criterion_uz":"Lyuks nomerlar.","criterion_en":"Suites.","criterion_ru":"–õ—é–∫—Å—ã.","points":0,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"31.1","criterion_uz":"Matras ‚â•18sm.","criterion_en":"Mattress ‚â•18cm.","criterion_ru":"–ú–∞—Ç—Ä–∞—Å ‚â•18—Å–º.","points":5,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":false,"5_star":false}},{"id":"31.2","criterion_uz":"Matras ‚â•22sm.","criterion_en":"Mattress ‚â•22cm.","criterion_ru":"–ú–∞—Ç—Ä–∞—Å ‚â•22—Å–º.","points":7,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"32.7","criterion_uz":"Ikki kishilik ‚â•1.8m.","criterion_en":"Double ‚â•1.8m.","criterion_ru":"–î–≤—É—Å–ø–∞–ª—å–Ω–∞—è ‚â•1.8–º.","points":10,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"33.2","criterion_uz":"Krovat ‚â•2m.","criterion_en":"Bed ‚â•2m.","criterion_ru":"–î–ª–∏–Ω–∞ ‚â•2–º.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":false}},{"id":"38","criterion_uz":"2 yostiq.","criterion_en":"2 pillows.","criterion_ru":"2 –ø–æ–¥—É—à–∫–∏.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":false}},{"id":"40","criterion_uz":"Gilam.","criterion_en":"Bedside rug.","criterion_ru":"–ö–æ–≤—Ä–∏–∫.","points":3,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":false}}]},{"id":5,"name_uz":"Nomer jihozlari","name_en":"Room Equipment","name_ru":"–û—Å–Ω–∞—â–µ–Ω–∏–µ","items":[{"id":"41","criterion_uz":"1 stul.","criterion_en":"1 chair.","criterion_ru":"1 —Å—Ç—É–ª.","points":3,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"42","criterion_uz":"1 kreslo.","criterion_en":"1 armchair.","criterion_ru":"1 –∫—Ä–µ—Å–ª–æ.","points":7,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"44","criterion_uz":"Stol.","criterion_en":"Table.","criterion_ru":"–°—Ç–æ–ª.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":false,"4_star":false,"5_star":false}},{"id":"45","criterion_uz":"0.35m¬≤ ish joyi.","criterion_en":"0.35m¬≤ desk.","criterion_ru":"–†–∞–±–æ—á–∞—è 0.35–º¬≤.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":false,"5_star":false}},{"id":"46","criterion_uz":"0.50m¬≤ ish joyi.","criterion_en":"0.50m¬≤ desk.","criterion_ru":"–†–∞–±–æ—á–∞—è 0.50–º¬≤.","points":7,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"48","criterion_uz":"Rozetka.","criterion_en":"Socket.","criterion_ru":"–†–æ–∑–µ—Ç–∫–∞.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"49","criterion_uz":"4 ilgak.","criterion_en":"4 hangers.","criterion_ru":"4 –≤–µ—à–∞–ª–∫–∏.","points":2,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"53","criterion_uz":"O'qish chirog'i.","criterion_en":"Reading lamp.","criterion_ru":"–õ–∞–º–ø–∞.","points":3,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"54","criterion_uz":"Mini-seyf.","criterion_en":"Safe.","criterion_ru":"–°–µ–π—Ñ.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"55","criterion_uz":"Konditsioner.","criterion_en":"AC.","criterion_ru":"–ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä.","points":10,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"58.1","criterion_uz":"TV ‚â•32.","criterion_en":"TV ‚â•32in.","criterion_ru":"–¢–í ‚â•32.","points":2,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":false,"5_star":false}},{"id":"58.2","criterion_uz":"TV ‚â•40.","criterion_en":"TV ‚â•40in.","criterion_ru":"–¢–í ‚â•40.","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"58.4","criterion_uz":"Xalqaro TV.","criterion_en":"Int'l channels.","criterion_ru":"–ú–µ–∂–¥. –∫–∞–Ω–∞–ª—ã.","points":5,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"60","criterion_uz":"Xavfsiz internet.","criterion_en":"Secure net.","criterion_ru":"–ë–µ–∑–æ–ø. –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"61","criterion_uz":"2 til info.","criterion_en":"2 lang info.","criterion_ru":"–ò–Ω—Ñ–æ 2 —è–∑—ã–∫–∞.","points":2,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"62","criterion_uz":"Tikuv to'plami.","criterion_en":"Sewing kit.","criterion_ru":"–®–≤–µ–π–Ω—ã–π –Ω–∞–±–æ—Ä.","points":3,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"63","criterion_uz":"Yozuv.","criterion_en":"Writing.","criterion_ru":"–ö–∞–Ω—Ü–µ–ª—è—Ä–∏—è.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"66","criterion_uz":"Tozalash.","criterion_en":"Cleaning kit.","criterion_ru":"–ù–∞–±–æ—Ä —É—Ö–æ–¥–∞.","points":2,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"67","criterion_uz":"Ko'zcha.","criterion_en":"Peephole.","criterion_ru":"–ì–ª–∞–∑–æ–∫.","points":3,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"68","criterion_uz":"Qulf.","criterion_en":"Lock.","criterion_ru":"–ó–∞–º–æ–∫.","points":1,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"69","criterion_uz":"Choynak.","criterion_en":"Kettle.","criterion_ru":"–ß–∞–π–Ω–∏–∫.","points":2,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}}]},{"id":6,"name_uz":"Sanuzel","name_en":"Bathroom","name_ru":"–°–∞–Ω—É–∑–µ–ª","items":[{"id":"76","criterion_uz":"Rakovina yorug'.","criterion_en":"Sink light.","criterion_ru":"–°–≤–µ—Ç —Ä–∞–∫–æ–≤–∏–Ω—ã.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"79","criterion_uz":"Rozetka.","criterion_en":"Socket.","criterion_ru":"–†–æ–∑–µ—Ç–∫–∞.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"83","criterion_uz":"Ilgichlar.","criterion_en":"Hooks.","criterion_ru":"–ö—Ä—é—á–∫–∏.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"85","criterion_uz":"Sochiq joyi.","criterion_en":"Towel storage.","criterion_ru":"–•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª–æ—Ç–µ–Ω–µ—Ü.","points":1,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"86.1","criterion_uz":"Bide ‚â•50%.","criterion_en":"Bidet ‚â•50%.","criterion_ru":"–ë–∏–¥–µ ‚â•50%.","points":2,"mandatory":{"1_star":true,"2_star":true,"3_star":false,"4_star":false,"5_star":false}},{"id":"86.2","criterion_uz":"Bide ‚â•75%.","criterion_en":"Bidet ‚â•75%.","criterion_ru":"–ë–∏–¥–µ ‚â•75%.","points":3,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":false}},{"id":"86.3","criterion_uz":"Bide 100%.","criterion_en":"Bidet 100%.","criterion_ru":"–ë–∏–¥–µ 100%.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":false,"5_star":true}},{"id":"87","criterion_uz":"Stakan.","criterion_en":"Cup.","criterion_ru":"–°—Ç–∞–∫–∞–Ω.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"88","criterion_uz":"Gel.","criterion_en":"Gel.","criterion_ru":"–ì–µ–ª—å.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"89","criterion_uz":"Shampun.","criterion_en":"Shampoo.","criterion_ru":"–®–∞–º–ø—É–Ω—å.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"90","criterion_uz":"Sanitariya.","criterion_en":"Sanitary kit.","criterion_ru":"–°–∞–Ω. –Ω–∞–±–æ—Ä.","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"91","criterion_uz":"Kosmetika.","criterion_en":"Cosmetics.","criterion_ru":"–ö–æ—Å–º–µ—Ç–∏–∫–∞.","points":1,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"92","criterion_uz":"Yuz salfetka.","criterion_en":"Face tissue.","criterion_ru":"–°–∞–ª—Ñ–µ—Ç–∫–∏ –ª–∏—Ü–∞.","points":3,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":false,"5_star":true}},{"id":"93","criterion_uz":"Salfetka.","criterion_en":"Tissues.","criterion_ru":"–°–∞–ª—Ñ–µ—Ç–∫–∏.","points":3,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":false}},{"id":"94","criterion_uz":"Xalat.","criterion_en":"Bathrobe.","criterion_ru":"–•–∞–ª–∞—Ç.","points":3,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"96","criterion_uz":"Shippak.","criterion_en":"Slippers.","criterion_ru":"–¢–∞–ø–æ—á–∫–∏.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"98","criterion_uz":"Fen.","criterion_en":"Hairdryer.","criterion_ru":"–§–µ–Ω.","points":3,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}}]},{"id":7,"name_uz":"Gastronomiya","name_en":"Gastronomy","name_ru":"–ì–∞—Å—Ç—Ä–æ–Ω–æ–º–∏—è","items":[{"id":"100","criterion_uz":"Ichimlik.","criterion_en":"Beverages.","criterion_ru":"–ù–∞–ø–∏—Ç–∫–∏.","points":1,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"101","criterion_uz":"Nomer ichimlik.","criterion_en":"Room beverages.","criterion_ru":"–ù–∞–ø–∏—Ç–∫–∏ –≤ –Ω–æ–º–µ—Ä.","points":3,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"102","criterion_uz":"Minibar.","criterion_en":"Minibar.","criterion_ru":"–ú–∏–Ω–∏-–±–∞—Ä.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"103","criterion_uz":"24s ichimlik.","criterion_en":"24h beverages.","criterion_ru":"24—á –Ω–∞–ø–∏—Ç–∫–∏.","points":15,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"104","criterion_uz":"24s bar.","criterion_en":"24h bar.","criterion_ru":"24—á –±–∞—Ä.","points":10,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"105","criterion_uz":"Kofe mashina.","criterion_en":"Coffee machine.","criterion_ru":"–ö–æ—Ñ–µ–º–∞—à–∏–Ω–∞.","points":5,"mandatory":{"1_star":false,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"106","criterion_uz":"Kontinental.","criterion_en":"Continental.","criterion_ru":"–ö–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞–ª—å–Ω—ã–π.","points":2,"mandatory":{"1_star":true,"2_star":true,"3_star":false,"4_star":false,"5_star":false}},{"id":"107","criterion_uz":"Shved stoli.","criterion_en":"Buffet.","criterion_ru":"–®–≤–µ–¥—Å–∫–∏–π —Å—Ç–æ–ª.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":false,"5_star":false}},{"id":"108","criterion_uz":"Xizmatli bufet.","criterion_en":"Serviced buffet.","criterion_ru":"–û–±—Å–ª. –±—É—Ñ–µ—Ç.","points":10,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"109","criterion_uz":"Nomer nonushta.","criterion_en":"Room breakfast.","criterion_ru":"–ó–∞–≤—Ç—Ä–∞–∫ –≤ –Ω–æ–º–µ—Ä.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":false,"5_star":true}},{"id":"112","criterion_uz":"24s taom.","criterion_en":"24h food.","criterion_ru":"24—á –µ–¥–∞.","points":15,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"113","criterion_uz":"Restoran.","criterion_en":"Restaurant.","criterion_ru":"–†–µ—Å—Ç–æ—Ä–∞–Ω.","points":5,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":false,"5_star":false}},{"id":"114","criterion_uz":"2+ restoran.","criterion_en":"2+ restaurants.","criterion_ru":"2+ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞.","points":10,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"116","criterion_uz":"Kunlik restoran.","criterion_en":"Daily restaurant.","criterion_ru":"–ï–∂–µ–¥–Ω. —Ä–µ—Å—Ç–æ—Ä–∞–Ω.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}}]},{"id":8,"name_uz":"Bo'sh vaqt","name_en":"Leisure & SPA","name_ru":"–î–æ—Å—É–≥ –∏ SPA","items":[{"id":"128","criterion_uz":"4+ trenajyor.","criterion_en":"Gym 4+.","criterion_ru":"–ó–∞–ª 4+.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"134","criterion_uz":"Sauna 6+.","criterion_en":"Sauna 6+.","criterion_ru":"–°–∞—É–Ω–∞ 6+.","points":5,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":false}},{"id":"137","criterion_uz":"Basseyn.","criterion_en":"Pool.","criterion_ru":"–ë–∞—Å—Å–µ–π–Ω.","points":10,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}}]},{"id":9,"name_uz":"Onlayn","name_en":"Online","name_ru":"–û–Ω–ª–∞–π–Ω","items":[{"id":"151","criterion_uz":"3 til sayt.","criterion_en":"3 lang site.","criterion_ru":"–°–∞–π—Ç 3 —è–∑—ã–∫–∞.","points":1,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}}]},{"id":10,"name_uz":"Xodimlar","name_en":"Staff","name_ru":"–ü–µ—Ä—Å–æ–Ω–∞–ª","items":[{"id":"160","criterion_uz":"Yetarli.","criterion_en":"Sufficient.","criterion_ru":"–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.","points":0,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"161","criterion_uz":"Standartlar.","criterion_en":"Standards.","criterion_ru":"–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã.","points":2,"mandatory":{"1_star":false,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"162","criterion_uz":"Trening.","criterion_en":"Training.","criterion_ru":"–¢—Ä–µ–Ω–∏–Ω–≥–∏.","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}},{"id":"163","criterion_uz":"2 til.","criterion_en":"2 languages.","criterion_ru":"2 —è–∑—ã–∫–∞.","points":3,"mandatory":{"1_star":false,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"164","criterion_uz":"3 til.","criterion_en":"3 languages.","criterion_ru":"3 —è–∑—ã–∫–∞.","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"165","criterion_uz":"Shveysar.","criterion_en":"Doorman.","criterion_ru":"–®–≤–µ–π—Ü–∞—Ä.","points":15,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":false,"5_star":true}},{"id":"166","criterion_uz":"Konserj.","criterion_en":"Concierge.","criterion_ru":"–ö–æ–Ω—Å—å–µ—Ä–∂.","points":15,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"167","criterion_uz":"Porter.","criterion_en":"Porter.","criterion_ru":"–ù–æ—Å–∏–ª—å—â–∏–∫.","points":15,"mandatory":{"1_star":false,"2_star":false,"3_star":false,"4_star":true,"5_star":true}},{"id":"168","criterion_uz":"Oshxona.","criterion_en":"Staff dining.","criterion_ru":"–°—Ç–æ–ª–æ–≤–∞—è.","points":2,"mandatory":{"1_star":false,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"169","criterion_uz":"Kiyinish.","criterion_en":"Changing.","criterion_ru":"–†–∞–∑–¥–µ–≤–∞–ª–∫–∞.","points":2,"mandatory":{"1_star":true,"2_star":true,"3_star":true,"4_star":true,"5_star":true}},{"id":"170","criterion_uz":"Dam olish.","criterion_en":"Rest room.","criterion_ru":"–ö–æ–º–Ω. –æ—Ç–¥—ã—Ö–∞.","points":2,"mandatory":{"1_star":false,"2_star":false,"3_star":true,"4_star":true,"5_star":true}}]}];

// STATE
let lang='en',checked=new Set(),targetStar=5,hotelProfile={name:'',emails:[],reportOptions:{}};

// HELPERS
const getCriterion=i=>i[`criterion_${lang}`]||i.criterion_en;
const getCatName=c=>c[`name_${lang}`]||c.name_en;
const getAllItems=()=>DATA.flatMap(c=>c.items);
const getStars=n=>'‚òÖ'.repeat(n)+'‚òÜ'.repeat(5-n);
const getMandCount=s=>getAllItems().filter(i=>i.mandatory[`${s}_star`]).length;

// LOGIN
document.getElementById('loginForm').addEventListener('submit',function(e){
    e.preventDefault();
    const u=document.getElementById('loginUsername').value;
    const p=document.getElementById('loginPassword').value;
    if(u&&p){document.getElementById('loginPage').style.display='none';document.getElementById('profilePage').style.display='block'}
});

// STAR SELECTOR
document.querySelectorAll('.star-option').forEach(opt=>{
    opt.addEventListener('click',()=>{
        document.querySelectorAll('.star-option').forEach(o=>o.classList.remove('selected'));
        opt.classList.add('selected');
        targetStar=parseInt(opt.dataset.star);
    });
});

// ADD EMAIL
let emailCount=1;
function addEmailField(){
    if(emailCount>=5)return;
    emailCount++;
    const row=document.createElement('div');
    row.className='email-row';
    row.innerHTML=`<input type="email" class="form-input" placeholder="Additional email ${emailCount}"><button type="button" class="btn-remove" onclick="this.parentElement.remove();emailCount--">√ó</button>`;
    document.getElementById('emailList').appendChild(row);
}

// GO TO APP
function goToApp(){
    const name=document.getElementById('hotelName').value;
    if(!name){alert('Please enter hotel name');return}
    hotelProfile.name=name;
    hotelProfile.emails=Array.from(document.querySelectorAll('#emailList input')).map(i=>i.value).filter(v=>v);
    hotelProfile.reportOptions={full:document.getElementById('optFullReport').checked,gap:document.getElementById('optGapAnalysis').checked,mandatory:document.getElementById('optMandatoryList').checked,weekly:document.getElementById('optWeeklyProgress').checked};
    document.getElementById('profilePage').style.display='none';
    document.getElementById('appPage').classList.add('active');
    document.getElementById('displayHotelName').textContent=name;
    document.getElementById('displayStars').textContent=getStars(targetStar);
    document.getElementById('assessTitle').textContent=name+' Assessment';
    init();
}

function logout(){
    document.getElementById('appPage').classList.remove('active');
    document.getElementById('loginPage').style.display='flex';
    checked.clear();localStorage.removeItem('hotelAssess');
}

// MAIN APP
function init(){loadSaved();calcStats();renderStarGrid();renderCatOverview();populateFilters();setupEvents()}
function loadSaved(){const s=localStorage.getItem('hotelAssess');if(s)checked=new Set(JSON.parse(s))}
function saveData(){localStorage.setItem('hotelAssess',JSON.stringify([...checked]))}
function calcStats(){const a=getAllItems();document.getElementById('stat-total').textContent=a.length;document.getElementById('stat-points').textContent=a.reduce((s,i)=>s+i.points,0);document.getElementById('stat-mandatory').textContent=getMandCount(targetStar)}
function renderStarGrid(){const g=document.getElementById('star-grid');g.innerHTML='';for(let i=1;i<=5;i++){const sel=i===targetStar;g.innerHTML+=`<div class="star-card ${sel?'selected':''}" onclick="selectStar(${i})"><div class="stars">${getStars(i)}</div><h3>${i} Star${i>1?'s':''}</h3><small>${getMandCount(i)} mandatory</small></div>`}}
function selectStar(s){targetStar=s;renderStarGrid();calcStats();document.getElementById('displayStars').textContent=getStars(s)}
function renderCatOverview(){document.getElementById('cat-overview').innerHTML=DATA.map(c=>`<div class="section"><div class="section-head" onclick="this.parentElement.classList.toggle('collapsed')"><h3><span>${getCatName(c)}</span> <span class="section-badge">${c.items.length}</span></h3><span class="section-toggle">‚ñº</span></div><div class="section-body"><table><thead><tr><th style="width:50px">ID</th><th>Criterion</th><th style="width:60px">Pts</th><th style="width:120px">1‚òÖ-5‚òÖ</th></tr></thead><tbody>${c.items.map(i=>`<tr><td class="cid">${i.id}</td><td>${getCriterion(i)}</td><td><span class="pts">${i.points}</span></td><td><div class="stars-row">${[1,2,3,4,5].map(s=>`<div class="star-dot ${i.mandatory[`${s}_star`]?'m':'o'}">${s}</div>`).join('')}</div></td></tr>`).join('')}</tbody></table></div></div>`).join('')}
function populateFilters(){const o=DATA.map(c=>`<option value="${c.id}">${getCatName(c)}</option>`).join('');['filter-cat','filter-cat-assess','filter-cat-compare'].forEach(id=>{const el=document.getElementById(id);if(el)el.innerHTML='<option value="">All Categories</option>'+o})}
function renderBrowse(){const search=document.getElementById('search-browse').value.toLowerCase(),catF=document.getElementById('filter-cat').value,starF=document.getElementById('filter-star').value,reqF=document.getElementById('filter-req').value,container=document.getElementById('browse-results');container.innerHTML='';DATA.forEach(cat=>{if(catF&&cat.id!=catF)return;let items=cat.items.filter(i=>{if(search&&!getCriterion(i).toLowerCase().includes(search)&&!i.id.includes(search))return false;if(starF){const k=`${starF}_star`;if(reqF==='m'&&!i.mandatory[k])return false;if(reqF==='o'&&i.mandatory[k])return false}return true});if(!items.length)return;container.innerHTML+=`<div class="section"><div class="section-head" onclick="this.parentElement.classList.toggle('collapsed')"><h3><span>${getCatName(cat)}</span> <span class="section-badge">${items.length}</span></h3><span class="section-toggle">‚ñº</span></div><div class="section-body"><table><thead><tr><th style="width:50px">ID</th><th>Criterion</th><th style="width:60px">Pts</th><th style="width:120px">1‚òÖ-5‚òÖ</th></tr></thead><tbody>${items.map(i=>`<tr><td class="cid">${i.id}</td><td>${getCriterion(i)}</td><td><span class="pts">${i.points}</span></td><td><div class="stars-row">${[1,2,3,4,5].map(s=>`<div class="star-dot ${i.mandatory[`${s}_star`]?'m':'o'}">${s}</div>`).join('')}</div></td></tr>`).join('')}</tbody></table></div></div>`})}
function renderAssess(){const search=document.getElementById('search-assess').value.toLowerCase(),catF=document.getElementById('filter-cat-assess').value,hideChecked=document.getElementById('hide-checked').checked,container=document.getElementById('assess-list');container.innerHTML='';const tKey=`${targetStar}_star`;DATA.forEach(cat=>{if(catF&&cat.id!=catF)return;let items=cat.items.filter(i=>{if(search&&!getCriterion(i).toLowerCase().includes(search))return false;if(hideChecked&&checked.has(i.id))return false;return true});if(!items.length)return;container.innerHTML+=`<div class="section"><div class="section-head" onclick="this.parentElement.classList.toggle('collapsed')"><h3><span>${getCatName(cat)}</span> <span class="section-badge">${items.length}</span></h3><span class="section-toggle">‚ñº</span></div><div class="section-body"><table><thead><tr><th style="width:40px">‚úì</th><th style="width:50px">ID</th><th>Criterion</th><th style="width:50px">Pts</th><th style="width:70px">${targetStar}‚òÖ</th></tr></thead><tbody>${items.map(i=>`<tr><td><div class="chk ${checked.has(i.id)?'on':''}" onclick="toggleCheck('${i.id}')"></div></td><td class="cid">${i.id}</td><td>${getCriterion(i)}</td><td><span class="pts">${i.points}</span></td><td><span class="star-dot ${i.mandatory[tKey]?'m':'o'}" style="width:auto;padding:0 6px">${i.mandatory[tKey]?'REQ':'OPT'}</span></td></tr>`).join('')}</tbody></table></div></div>`});updateAssessStats()}
function toggleCheck(id){checked.has(id)?checked.delete(id):checked.add(id);saveData();renderAssess()}
function updateAssessStats(){const all=getAllItems(),checkedItems=all.filter(i=>checked.has(i.id)),points=checkedItems.reduce((s,i)=>s+i.points,0),tKey=`${targetStar}_star`,mand=all.filter(i=>i.mandatory[tKey]),met=mand.filter(i=>checked.has(i.id)),pct=mand.length?Math.round((met.length/mand.length)*100):0;document.getElementById('a-points').textContent=points;document.getElementById('a-count').textContent=checkedItems.length;document.getElementById('a-mand').textContent=pct+'%';let eligible=0;for(let s=5;s>=1;s--){const m=all.filter(i=>i.mandatory[`${s}_star`]);if(m.every(i=>checked.has(i.id))){eligible=s;break}}document.getElementById('a-result').textContent=getStars(eligible)}
function resetAssess(){if(confirm('Reset all?')){checked.clear();localStorage.removeItem('hotelAssess');renderAssess()}}
function renderCompare(){const catF=document.getElementById('filter-cat-compare').value;let cats=catF?DATA.filter(c=>c.id==catF):DATA;let html='<div class="compare-grid"><div class="c-head">Criterion</div>';for(let s=1;s<=5;s++)html+=`<div class="c-head star">${s}‚òÖ</div>`;cats.forEach(cat=>{html+=`<div class="c-cat">${getCatName(cat)}</div>`;cat.items.forEach(i=>{html+=`<div class="c-cell">${getCriterion(i)}</div>`;for(let s=1;s<=5;s++){const m=i.mandatory[`${s}_star`];html+=`<div class="c-cell center">${m?'<span class="check-i">‚úì</span>':'<span class="dash-i">‚Äî</span>'}</div>`}})});html+='</div>';document.getElementById('compare-table').innerHTML=html}
function showReport(type){const modal=document.getElementById('modal'),title=document.getElementById('modal-title'),body=document.getElementById('modal-body'),all=getAllItems(),checkedItems=all.filter(i=>checked.has(i.id)),points=checkedItems.reduce((s,i)=>s+i.points,0),tKey=`${targetStar}_star`;if(type==='full'){title.textContent='Full Assessment - '+hotelProfile.name;body.innerHTML=`<div style="margin-bottom:1rem;padding:1rem;background:var(--gold-50);border-radius:8px"><h4 style="margin-bottom:0.5rem">Summary</h4><p><b>Hotel:</b> ${hotelProfile.name}</p><p><b>Target:</b> ${targetStar}‚òÖ</p><p><b>Criteria:</b> ${checkedItems.length}/${all.length}</p><p><b>Points:</b> ${points}</p></div><h4 style="margin-bottom:0.5rem">Checked Criteria</h4>${DATA.map(c=>{const cc=c.items.filter(i=>checked.has(i.id));if(!cc.length)return'';return`<div style="margin-bottom:1rem"><b>${getCatName(c)}</b><ul style="margin:0.3rem 0 0 1.2rem;font-size:0.85rem">${cc.map(i=>`<li>${getCriterion(i)} (${i.points}pts)</li>`).join('')}</ul></div>`}).join('')}`}else if(type==='gap'){title.textContent='Gap Analysis - '+targetStar+'‚òÖ';const mand=all.filter(i=>i.mandatory[tKey]),missing=mand.filter(i=>!checked.has(i.id));body.innerHTML=`<div style="margin-bottom:1rem;padding:1rem;background:var(--gold-50);border-radius:8px"><p><b>Target:</b> ${targetStar}‚òÖ</p><p><b>Missing:</b> ${missing.length} of ${mand.length} mandatory criteria</p></div>${missing.length?`<h4 style="margin-bottom:0.5rem">Missing Criteria</h4><ul style="margin:0 0 0 1.2rem;font-size:0.85rem">${missing.map(i=>`<li>${getCriterion(i)}</li>`).join('')}</ul>`:'<p style="color:var(--success)">‚úì All mandatory criteria met!</p>'}`}else if(type==='mandatory'){title.textContent='Mandatory Checklist - '+targetStar+'‚òÖ';const mand=all.filter(i=>i.mandatory[tKey]);body.innerHTML=`<h4 style="margin-bottom:0.5rem">${targetStar}‚òÖ Requirements (${mand.length})</h4>${DATA.map(c=>{const cm=c.items.filter(i=>i.mandatory[tKey]);if(!cm.length)return'';return`<div style="margin-bottom:1rem"><b style="font-size:0.9rem">${getCatName(c)}</b><ul style="margin:0.3rem 0 0 1.2rem;font-size:0.85rem">${cm.map(i=>`<li style="color:${checked.has(i.id)?'var(--success)':'inherit'}">${checked.has(i.id)?'‚úì':'‚óã'} ${getCriterion(i)}</li>`).join('')}</ul></div>`}).join('')}`}modal.classList.add('active')}
function emailReport(){const emails=hotelProfile.emails.filter(e=>e);if(!emails.length){alert('No email addresses configured. Please add emails in your profile.');return}const msg=`Reports will be sent to:\n${emails.join('\n')}\n\nSelected reports:\n${hotelProfile.reportOptions.full?'‚úì Full Assessment\n':''}${hotelProfile.reportOptions.gap?'‚úì Gap Analysis\n':''}${hotelProfile.reportOptions.mandatory?'‚úì Mandatory Checklist\n':''}${hotelProfile.reportOptions.weekly?'‚úì Weekly Updates\n':''}`;alert(msg+'\n(In production, this would send actual emails)')}
function closeModal(){document.getElementById('modal').classList.remove('active')}
function exportData(){const data={hotel:hotelProfile.name,targetStar,timestamp:new Date().toISOString(),checkedCriteria:[...checked],totalChecked:checked.size,emails:hotelProfile.emails,totalPoints:getAllItems().filter(i=>checked.has(i.id)).reduce((s,i)=>s+i.points,0)};const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`${hotelProfile.name.replace(/\s+/g,'-')}-assessment-${new Date().toISOString().split('T')[0]}.json`;a.click();URL.revokeObjectURL(url)}
function setupEvents(){document.querySelectorAll('.nav-tab').forEach(tab=>{tab.addEventListener('click',()=>{document.querySelectorAll('.nav-tab').forEach(t=>t.classList.remove('active'));document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));tab.classList.add('active');document.getElementById(tab.dataset.tab).classList.add('active');if(tab.dataset.tab==='browse')renderBrowse();if(tab.dataset.tab==='assess')renderAssess();if(tab.dataset.tab==='compare')renderCompare()})});document.querySelectorAll('.lang-btn').forEach(btn=>{btn.addEventListener('click',()=>{document.querySelectorAll('.lang-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');lang=btn.dataset.lang;renderStarGrid();renderCatOverview();populateFilters();renderBrowse();renderAssess();renderCompare()})});document.getElementById('search-browse').addEventListener('input',renderBrowse);document.getElementById('filter-cat').addEventListener('change',renderBrowse);document.getElementById('filter-star').addEventListener('change',renderBrowse);document.getElementById('filter-req').addEventListener('change',renderBrowse);document.getElementById('search-assess').addEventListener('input',renderAssess);document.getElementById('filter-cat-assess').addEventListener('change',renderAssess);document.getElementById('hide-checked').addEventListener('change',renderAssess);document.getElementById('filter-cat-compare').addEventListener('change',renderCompare);document.getElementById('modal').addEventListener('click',e=>{if(e.target.id==='modal')closeModal()})}
</script>
</body>
</html>